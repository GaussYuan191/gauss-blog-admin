var F=Object.defineProperty,k=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var y=(t,r,e)=>r in t?F(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,f=(t,r)=>{for(var e in r||(r={}))B.call(r,e)&&y(t,e,r[e]);if(h)for(var e of h(r))C.call(r,e)&&y(t,e,r[e]);return t},v=(t,r)=>k(t,S(r));import{u as A}from"./index.1e529502.js";import{i as T,u as j}from"./index.32603921.js";import{r as g,j as i,a as D}from"./index.1e18674b.js";import{P as E}from"./page-layout.ad34ff44.js";import{d as I,g as P}from"./api.17a0994e.js";import{T as $,d as M}from"./index.634b5a67.js";import{T as O,D as _}from"./Table.991498cd.js";import{ag as Y}from"./index.aef76a23.js";import"./index.d09e3fac.js";import"./index.ac3dbe7f.js";import"./styleChecker.0a04cfc8.js";import"./index.f3179481.js";import"./index.800a318d.js";import"./index.7904e80b.js";import"./index.dd62996c.js";import"./Overflow.d99eac34.js";import"./index.0958ac02.js";import"./Dropdown.51364922.js";import"./index.057e14fb.js";var p=globalThis&&globalThis.__assign||function(){return p=Object.assign||function(t){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p.apply(this,arguments)},L=globalThis&&globalThis.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var a=e.call(t),n,c=[],s;try{for(;(r===void 0||r-- >0)&&!(n=a.next()).done;)c.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(s)throw s.error}}return c},H=function(r){var e=L(g.exports.useState(r),2),a=e[0],n=e[1],c=g.exports.useCallback(function(s){n(function(u){var d=T(s)?s(u):s;return d?p(p({},u),d):u})},[]);return[a,c]},z=H;const K=["magenta","geekblue","red","volcano","orange","gold","lime","green","cyan","purple"],N=[{title:"#",width:50,key:"tindex",render:(t,r,e)=>i("span",{children:e+1})},{title:"\u6807\u9898",width:280,dataIndex:"title",key:"title"},{title:"\u6807\u7B7E",key:"tag",width:250,render:t=>i("span",{children:t.tag.map((r,e)=>i($,{color:K[e]||"red",children:r.name},r._id))})},{title:"\u66F4\u65B0\u65E5\u671F",width:250,dataIndex:"update_at",key:"update_at",render:t=>i("div",{children:M(t).format("YYYY-MM-DD HH:mm:ss")})},{title:"\u4FE1\u606F",dataIndex:"meta",key:"meta",render:t=>i("div",{children:`\u8BC4\u8BBA\uFF1A${t.comments}\u3001\u6D4F\u89C8\uFF1A${t.views}\u3001\u559C\u6B22\uFF1A${t.likes}`})},{title:"\u7F16\u8F91",key:"operation",dataIndex:"operation",width:150}];const mt=t=>{const[r,e]=g.exports.useState([]),[a,n]=z({current:1,total:0}),[c,{set:s}]=A(!1),u=async()=>{var l;s(!0);const{data:o}=await P({current_page:a.current,state:2});if(o.code){const{pagination:m}=o.result;e(((l=o==null?void 0:o.result)==null?void 0:l.list)||[]),n({current:m.current_page,total:m.total})}s(!1)};async function d(o){t.history.push(`/article-add?id=${o}`)}async function w(o){const{data:l}=await I(o);l.code&&(Y.success(l.message),n({current:1,total:0}),await u())}const b={body:{cell:G}},x=N.map(o=>o.dataIndex==="operation"?v(f({},o),{onCell:(l,m)=>({col:o,record:l,edit:d,del:w,rowIndex:m})}):o);return j(async()=>{await u()}),i(E,{title:"\u8349\u7A3F\u7BB1",children:i(O,{components:b,columns:x,loading:c,dataSource:r||[],bordered:!0,size:"middle",pagination:a,rowKey:"_id"})})};function q(t){const{edit:r,del:e,record:a}=t;return D("div",{className:"t_btn",children:[i("span",{onClick:()=>{console.log("view")},children:"\u67E5\u770B"}),i(_,{type:"vertical"}),i("span",{onClick:()=>r(a._id),children:"\u4FEE\u6539"}),i(_,{type:"vertical"}),i("span",{onClick:()=>e(a._id),children:"\u5220\u9664"})]})}function G(t){const{children:r,col:e}=t,a=e&&e.dataIndex==="operation"?i(q,f({},t)):r;return i("td",{children:a})}export{mt as default};
