var b=Object.defineProperty,E=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var f=(t,e,r)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l=(t,e)=>{for(var r in e||(e={}))I.call(e,r)&&f(t,r,e[r]);if(g)for(var r of g(e))L.call(e,r)&&f(t,r,e[r]);return t},h=(t,e)=>E(t,B(e));import{u as S}from"./index.32603921.js";import{a as D}from"./useRequest.bbe0d0ea.js";import{j as a,r as d,a as T}from"./index.1e18674b.js";import{P as j}from"./page-layout.ad34ff44.js";import{g as P,d as Y}from"./api.17a0994e.js";import{T as $,d as M}from"./index.634b5a67.js";import{T as H,D as y}from"./Table.991498cd.js";import{ag as q}from"./index.aef76a23.js";import"./index.0c3edb1e.js";import"./index.f3179481.js";import"./index.800a318d.js";import"./index.d09e3fac.js";import"./index.ac3dbe7f.js";import"./styleChecker.0a04cfc8.js";import"./index.7904e80b.js";import"./index.dd62996c.js";import"./Overflow.d99eac34.js";import"./index.0958ac02.js";import"./Dropdown.51364922.js";import"./index.057e14fb.js";const z=["magenta","geekblue","red","volcano","orange","gold","lime","green","cyan","purple"],K=[{title:"#",width:50,key:"tindex",render:(t,e,r)=>a("span",{children:r+1})},{title:"\u6807\u9898",width:280,dataIndex:"title",key:"title",ellipsis:!0},{title:"\u6807\u7B7E",key:"tag",width:250,render:t=>a("span",{children:t.tag.map((e,r)=>a($,{color:z[r]||"red",children:e.name},e._id))})},{title:"\u66F4\u65B0\u65E5\u671F",width:250,dataIndex:"update_at",key:"update_at",render:t=>a("div",{children:M(t).format("YYYY-MM-DD HH:mm:ss")})},{title:"\u4FE1\u606F",dataIndex:"meta",key:"meta",render:t=>a("div",{children:`\u8BC4\u8BBA\uFF1A${t.comments}\u3001\u6D4F\u89C8\uFF1A${t.views}\u3001\u559C\u6B22\uFF1A${t.likes}`})},{title:"\u7F16\u8F91",key:"operation",dataIndex:"operation",width:150}];const pt=t=>{const[e,r]=d.exports.useState([]),[s,u]=d.exports.useState({current:1,total:0}),[x,c]=d.exports.useState(!0),[p,m]=d.exports.useState(0),F=()=>new Promise(async(o,n)=>{const{data:i}=await P();console.log("data",i),i.code&&i.code==1?o(i.result):n(i)}),{run:w}=D(F,{manual:!0,onSuccess:o=>{const{list:n,pagination:i}=o;r(n||[]),u({current:i.current_page,total:i.total}),c(!1)},onError:o=>{console.log(o.message),c(!1)}});S(()=>{w()});async function v(o){t.history.push(`/article-add?id=${o}`)}async function k(o){const{data:n}=await Y(o);n.code&&(q.success(n.message),u({current:1,total:0}),m(p+1))}const C=K.map(o=>o.dataIndex==="operation"?h(l({},o),{onCell:n=>({col:o,record:n,edit:v,del:k})}):o),A={body:{cell:N}};function _(o){u({current:o.current||1,total:o.total||0}),m(p+1)}return a(j,{title:"\u6587\u7AE0\u5217\u8868",children:a(H,{onChange:_,components:A,columns:C,loading:x,dataSource:e,bordered:!0,size:"middle",pagination:s,rowKey:"_id"})})};function N(t){const{children:e,col:r}=t,s=r&&r.dataIndex==="operation"?a(O,l({},t)):e;return a("td",{children:s})}function O(t){const{edit:e,del:r,record:s}=t;return T("div",{className:"t_btn",children:[a("span",{onClick:()=>{console.log("view")},children:"\u67E5\u770B"}),a(y,{type:"vertical"}),a("span",{onClick:()=>e(s._id),children:"\u4FEE\u6539"}),a(y,{type:"vertical"}),a("span",{onClick:()=>r(s._id),children:"\u5220\u9664"})]})}export{O as Operate,pt as default};
